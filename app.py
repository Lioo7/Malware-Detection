import matplotlib.pyplot as plt
from flask import Flask, render_template, request
import networkx as nx
import matplotlib
matplotlib.use('Agg')

app = Flask(__name__)

@app.route('/')
def home_page():
    return render_template('index.html')

@app.route('/about')
def about():
    return render_template('about.html')

@app.route('/examples')
def examples():
    return render_template('examples.html')

# Functions 
@app.route('/generate_graphs', methods=['POST'])
def generate_graphs():
    vertices_1 = int(request.form['vertices_1'])
    edges_1 = int(request.form['edges_1'])
    vertices_2 = int(request.form['vertices_2'])
    edges_2 = int(request.form['edges_2'])

    # Generate the graphs
    G1 = nx.gnm_random_graph(n=vertices_1, m=edges_1, directed=True)
    G2 = nx.gnm_random_graph(n=vertices_2, m=edges_2, directed=True)

    # Draw the graphs and save them to files
    plt.cla()  # clear
    nx.draw(G1, with_labels=True)
    plt.savefig('static/img/G1')
    plt.cla()  # clear
    nx.draw(G2, with_labels=True)
    plt.savefig('static/img/G2')

    return 'Input accepted!'
    

if __name__ == '__main__':
    app.run(debug = True)